CREATE TABLE admin (id BIGINT AUTO_INCREMENT, username VARCHAR(50) NOT NULL, password VARCHAR(50) NOT NULL, name VARCHAR(30), phone VARCHAR(20), status TINYINT(1) DEFAULT '0' NOT NULL, email VARCHAR(255) UNIQUE, last_login_ip VARCHAR(20) NOT NULL, last_login_at DATETIME NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = MyISAM;
CREATE TABLE admin_auth (id BIGINT AUTO_INCREMENT, admin_id BIGINT, credential VARCHAR(50), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX admin_id_idx (admin_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = MyISAM;
CREATE TABLE attachment_categorys (id BIGINT AUTO_INCREMENT, name VARCHAR(250) NOT NULL, parent_id BIGINT DEFAULT 0 NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = MyISAM;
CREATE TABLE attachments (id BIGINT AUTO_INCREMENT, source_name VARCHAR(250) NOT NULL, file_name VARCHAR(250) NOT NULL, file_key VARCHAR(250) NOT NULL, category_id BIGINT DEFAULT 0 NOT NULL, thumb TEXT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = MyISAM;
CREATE TABLE attention (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, pid BIGINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = MyISAM;
CREATE TABLE channel (id BIGINT AUTO_INCREMENT, code VARCHAR(50) NOT NULL, name VARCHAR(20), memo VARCHAR(255), type VARCHAR(20), provice VARCHAR(20), city VARCHAR(20), logo VARCHAR(100) DEFAULT '0', tv_station_id BIGINT NOT NULL, sort_id BIGINT DEFAULT 0 NOT NULL, publish TINYINT DEFAULT 1 NOT NULL, autosyn VARCHAR(1) DEFAULT '0', config TEXT, hot BIGINT DEFAULT 0 NOT NULL, tvsou_update DATETIME, editor_update DATETIME, tvsou_get TINYINT DEFAULT 0, epg_update DATETIME, epg_get TINYINT DEFAULT 0, recommend BIGINT DEFAULT 0 NOT NULL, like_num TINYINT DEFAULT 0, dislike_num TINYINT DEFAULT 0, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX tv_station_id_idx (tv_station_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = MyISAM;
CREATE TABLE channel_recommend (id BIGINT AUTO_INCREMENT, channel_code VARCHAR(32) NOT NULL, wiki_id VARCHAR(32) NOT NULL, title VARCHAR(128) NOT NULL, pic VARCHAR(128) NOT NULL, playtime VARCHAR(32) NOT NULL, remark VARCHAR(255) NOT NULL, sort BIGINT DEFAULT 0 NOT NULL, publish TINYINT DEFAULT 0 NOT NULL, tongbu_id bigint(20) DEFAULT  NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = MyISAM;
CREATE TABLE favorites (id BIGINT AUTO_INCREMENT, user_id BIGINT NOT NULL, content VARCHAR(50) NOT NULL, type VARCHAR(50) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = MyISAM;
CREATE TABLE ip (id BIGINT AUTO_INCREMENT, ip1 BIGINT, ip2 BIGINT, province VARCHAR(10) NOT NULL, city VARCHAR(10) NOT NULL, code VARCHAR(32) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = MyISAM;
CREATE TABLE migration_version (id BIGINT AUTO_INCREMENT, version INT, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE tags (id BIGINT AUTO_INCREMENT, name VARCHAR(100), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = MyISAM;
CREATE TABLE theme (id BIGINT AUTO_INCREMENT, title VARCHAR(250) NOT NULL, remark TEXT NOT NULL, img VARCHAR(250) NOT NULL, publish INT DEFAULT '0' NOT NULL, model VARCHAR(250) NOT NULL, scene VARCHAR(250) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = MyISAM;
CREATE TABLE theme_item (id BIGINT AUTO_INCREMENT, theme_id BIGINT DEFAULT '0' NOT NULL, wiki_id VARCHAR(32) DEFAULT '0' NOT NULL, remark VARCHAR(250) NOT NULL, img VARCHAR(250) NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX theme_id_idx (theme_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = MyISAM;
CREATE TABLE tv_station (id BIGINT AUTO_INCREMENT, parent_id BIGINT DEFAULT 0 NOT NULL, name VARCHAR(100), sort BIGINT DEFAULT 0 NOT NULL, publish TINYINT DEFAULT 0 NOT NULL, code VARCHAR(32) NOT NULL, provice VARCHAR(20), city VARCHAR(20), created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, INDEX parent_id_idx (parent_id), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = MyISAM;
CREATE TABLE user_ext (id BIGINT AUTO_INCREMENT, user_id BIGINT, user_key VARCHAR(50) NOT NULL, user_value TEXT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) ENGINE = INNODB;
CREATE TABLE userliving (id INT AUTO_INCREMENT, user_id BIGINT NOT NULL, channel VARCHAR(50) NOT NULL, isliving TINYINT NOT NULL, created_at DATETIME NOT NULL, updated_at DATETIME NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = MyISAM;
ALTER TABLE admin_auth ADD CONSTRAINT admin_auth_admin_id_admin_id FOREIGN KEY (admin_id) REFERENCES admin(id);
ALTER TABLE channel ADD CONSTRAINT channel_tv_station_id_tv_station_id FOREIGN KEY (tv_station_id) REFERENCES tv_station(id);
ALTER TABLE theme_item ADD CONSTRAINT theme_item_theme_id_theme_id FOREIGN KEY (theme_id) REFERENCES theme(id);
ALTER TABLE tv_station ADD CONSTRAINT tv_station_parent_id_tv_station_id FOREIGN KEY (parent_id) REFERENCES tv_station(id);
