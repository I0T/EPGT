<script type="text/javascript">function saveThumbnail(){    $("#message-box").empty();    $("#watch").empty();    url = $("input[name=url]").val();    width = $("input[name=width]").val();    height = $("input[name=height]").val();    category_id = $("input[name=category_id]").val();    if( width=='' || isNaN(width)){        alert("请输入一个数字");        return;    }    if( height=='' || isNaN(height)){        alert("请输入一个数字");        return;    }        $.ajax({        type:"POST",        dataType: "json",        url: "<?php echo url_for('media/saveThumbnail') ?>",        data: "url=" + url + '&category_id='+category_id+'&width=' + width + '&height=' + height,        beforeSend: function(){               $("input[type=submit]").val("正在生成缩略图...").attr("disabled","disabled");        },        success: function(data){             html = "<div class=\"status success\"><p>成功生成缩略图<\/p></div>";             $("#message-box").append(html);             watch = "<a href="+data+" target=\"_blank\">查看缩略图<\/a><\/p>";             $("input[name=thumbnail_url]").val(data)             $("#watch").append(watch);             $("input[type=submit]").val("生成缩略图").attr("disabled","");             $("input[name=width]").val("");             $("input[name=height]").val("");        },        error: function() {             html = "<div class=\"status error\"><p>保存失败<\/p></div>";            $("#message-box").append(html);       }    })}</script>  <div id="file-wrap">    <header>      <h2 class="content">生成缩略图</h2>    </header>     <div class="default" id="message-box"></div>    <div class="widget generate-pic-form">      <h3>请指定缩略图的尺寸</h3>      <div class="widget-body">        <input type="hidden" name="url" value="<?php echo $url?>">        <input type="hidden" name="category_id" value="<?php echo $categoryId?>">        <p><label>宽：</label> <input name="width" type="text"> px <!--            <span class="tip">图像宽度不能为空</span>-->        </p>        <p><label>高：</label> <input name="height" type="text"> px <!--            <span class="tip">图像高度不能为空</span>-->        </p>        <p><input name="" type="submit" value="生成缩略图" onclick="javascript:saveThumbnail();"></p>        <p><label>缩略图地址：</label> <input name="thumbnail_url" type="text"><span id="watch"></span>      </div>    </div>  </div>